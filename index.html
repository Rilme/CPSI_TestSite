<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>File Upload JavaScript with Progress Bar | Learn With Daniel</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
  </head>
  <body>
    <div class="area">
      <h1 class="title">CPSI</h1>
      <div class="upload-dl">
        <div class="wrapper">
          <header>Driver's License Uploader</header>
          <form id="uploadForm" enctype="multipart/form-data">
            <input id="fileInput" class="file-input" type="file" name="file" hidden multiple />
            <label for="fileInput">
              <i class="fas fa-cloud-upload-alt"></i>
              <p>Browse File to Upload</p>
            </label>
          </form>
          <section class="progress-area"></section>
          <section class="uploaded-area"></section>
          <input
            class="button"
            type="button"
            value="Upload"
            onclick="uploadFile()"
          /><br />
        </div>
      </div>
      <button class="button" onclick="window.location.href = 'Manual.html';">
        Manual Upload
      </button>
      <script src="jsIndex.js"></script>
      <script>
        async function uploadFile() {
          const fileInput = document.getElementById('fileInput');
          const file = fileInput.files[0];

          const formData = new FormData();
          formData.append('file', file);

          try {
            const response = await fetch('https://prod-92.westus.logic.azure.com:443/workflows/b8aed472476d4e30a762027d45f29a3f/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=RvJN_krp58oEEFEz6KX-ye_0Yu-9v3hGlbN9JMQuMC4', {
              method: 'POST',
              body: formData
            });

            if (response.ok) {
              console.log('File uploaded successfully.');
              // Trigger any success action you want here
            } else {
              console.error('Failed to upload file.');
              // Trigger any error action you want here
            }
          } catch (error) {
            console.error('Error uploading file:', error);
            // Trigger any error action you want here
          }
        }
      </script>
    </div>
  </body>
</html>
